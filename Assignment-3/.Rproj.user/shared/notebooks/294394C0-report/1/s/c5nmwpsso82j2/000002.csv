"0","# drop observations where price is above 750 euros per night (there are 2 of these)"
"0","data <- data %>% filter(price < 750)"
"0",""
"0","# missing values ----------------------------------------------------------"
"0",""
"0","# the ratings columns have missing values"
"0","to_filter <- sapply(data, function(x) sum(is.na(x)))"
"0","to_filter[to_filter > 0]"
"1","  rating_count "
"1","      ratingta "
"1","ratingta_count "
"1","        rating "
"1","
"
"1","            35 "
"1","           103 "
"1","           103 "
"1","            35 "
"1","
"
"0","# drop TripAdvisor ratings and their counts because a quarter of them is missing"
"0","data <- data %>% mutate("
"0","  ratingta = NULL,"
"0","  ratingta_count = NULL"
"0",")"
"0",""
"0","# impute missing ratings with mean"
"0","# impute missing rating counts with median"
"0","# plus add flags for these observations"
"0","data <- data %>% mutate( rating_flag = ifelse(is.na(rating), 1, 0),"
"0","                         rating = ifelse(is.na(rating), mean(data$rating, na.rm = T), rating),"
"0","                         rating_count_flag = ifelse(is.na(rating_count), 1, 0),"
"0","                         rating_count = ifelse(is.na(rating_count), median(data$rating_count, na.rm = T), rating_count))"
