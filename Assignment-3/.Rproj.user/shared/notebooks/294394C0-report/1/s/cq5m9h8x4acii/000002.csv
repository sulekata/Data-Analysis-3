"0","# import raw data -------------------------------------------------------------"
"0","data <- read_csv('C:/CEU/Winter_Term/Data_Analysis_3/Assignment_3/data/raw/hotels-vienna.csv')"
"0",""
"0","# inspect variables -------------------------------------------------------"
"0",""
"0","## check variables that probably have no variation"
"0","# all observations are for Austria"
"0","table(data$country)"
"1","
"
"1","Austria "
"1","
"
"1","    428 "
"1","
"
"0","# 418 hotels in Vienna, 10 elsewhere"
"0","table(data$city_actual)"
"1","
"
"1","Fischamend "
"1"," Schwechat "
"1","    Vienna "
"1","Voesendorf "
"1","
"
"1","         1 "
"1","         7 "
"1","       418 "
"1","         2 "
"1","
"
"0","# check those 10 observations which are not in Vienna"
"0","not_vienna <- data %>% filter(city_actual != 'Vienna')"
"0","# check the distribution of distance without those 10"
"0","describe(data[data$city_actual == 'Vienna',]$distance)"
"1","data[data$city_actual == ""Vienna"", ]$distance"
"1"," "
"1","
"
"1","       n "
"1"," missing "
"1","distinct "
"1","    Info "
"1","    Mean "
"1","     Gmd "
"1","     .05 "
"1","     .10 "
"1","     .25 "
"1","
"
"1","     418 "
"1","       0 "
"1","      53 "
"1","   0.998 "
"1","   1.494 "
"1","   1.224 "
"1","   0.200 "
"1","   0.300 "
"1","   0.700 "
"1","
"
"1","     .50 "
"1","     .75 "
"1","     .90 "
"1","     .95 "
"1","
"
"1","   1.300 "
"1","   1.900 "
"1","   3.030 "
"1","   3.715 "
"1","
"
"1",""
"1","
"
"1","lowest : 0.0 0.1 0.2 0.3 0.4, highest: 5.2 5.3 5.4 6.6 6.9"
"1","
"
"0","# drop these observations because they are too far from the city centre"
"0","data <- data %>% filter(city_actual == 'Vienna')"
"0",""
"0","# all observations are for Vienna"
"0","table(data$city)"
"1","
"
"1","Vienna "
"1","
"
"1","   418 "
"1","
"
"0","# center1label is city centre for all observations"
"0","table(data$center1label)"
"1","
"
"1","City centre "
"1","
"
"1","        418 "
"1","
"
"0","# center2label is Donauturm for all observations"
"0","table(data$center2label)"
"1","
"
"1","Donauturm "
"1","
"
"1","      418 "
"1","
"
"0","# year is 2017"
"0","table(data$year)"
"1","
"
"1","2017 "
"1","
"
"1"," 418 "
"1","
"
"0","# month is 11"
"0","table(data$month)"
"1","
"
"1"," 11 "
"1","
"
"1","418 "
"1","
"
"0","# weekend is 0"
"0","table(data$weekend)"
"1","
"
"1","  0 "
"1","
"
"1","418 "
"1","
"
"0","# holiday is 0"
"0","table(data$holiday)"
"1","
"
"1","  0 "
"1","
"
"1","418 "
"1","
"
"0","# nnights is 1"
"0","table(data$nnights)"
"1","
"
"1","  1 "
"1","
"
"1","418 "
"1","
"
"0","# drop variables which have no variation"
"0","data <- data %>% mutate("
"0","  country = NULL,"
"0","  city = NULL,"
"0","  city_actual = NULL,"
"0","  center1label = NULL,"
"0","  center2label = NULL,"
"0","  year = NULL,"
"0","  month = NULL,"
"0","  weekend = NULL,"
"0","  holiday = NULL,"
"0","  nnights = NULL"
"0",")"
"0",""
"0","# check categorical variables and convert them to factor"
"0","# there are 19 neighbourhoods"
"0","table(data$neighbourhood)"
"1","
"
"1","         17. Hernals "
"1","          Alsergrund "
"1","          Donaustadt "
"1","           Favoriten "
"1","
"
"1","                   2 "
"1","                  17 "
"1","                   9 "
"1","                  22 "
"1","
"
"1","              Graben "
"1","        Innere Stadt "
"1","          Josefstadt "
"1","   Kaerntner Strasse "
"1","
"
"1","                   3 "
"1","                  84 "
"1","                  26 "
"1","                  10 "
"1","
"
"1","         Landstrasse "
"1","        Leopoldstadt "
"1","          Margareten "
"1","           Mariahilf "
"1","
"
"1","                  32 "
"1","                  41 "
"1","                  16 "
"1","                  25 "
"1","
"
"1","              Neubau "
"1","           Ottakring "
"1","Rudolfsheim-Funfhaus "
"1","          Schonbrunn "
"1","
"
"1","                  21 "
"1","                   5 "
"1","                  21 "
"1","                  14 "
"1","
"
"1","              Vienna "
"1","             Wahring "
"1","              Wieden "
"1","
"
"1","                  43 "
"1","                   5 "
"1","                  22 "
"1","
"
"0","length(table(data$neighbourhood))"
"1","[1]"
"1"," 19"
"1","
"
"0","# there are 5 offer categories, group the 50%-75% and 75%+ categories"
"0","table(data$offer_cat)"
"1","
"
"1","  0% no offer "
"1","  1-15% offer "
"1"," 15-50% offer "
"1","50%-75% offer "
"1","   75%+ offer "
"1","
"
"1","          129 "
"1","           86 "
"1","          181 "
"1","           21 "
"1","            1 "
"1","
"
"0","# there are 7 accommodation types, make 3 groups: apartment, hotel, other"
"0","table(data$accommodation_type)"
"1","
"
"1","        Apart-hotel "
"1","          Apartment "
"1","  Bed and breakfast "
"1","        Guest House "
"1","
"
"1","                  4 "
"1","                124 "
"1","                  4 "
"1","                  8 "
"1","
"
"1","             Hostel "
"1","              Hotel "
"1","            Pension "
"1","Vacation home Condo "
"1","
"
"1","                  6 "
"1","                254 "
"1","                 16 "
"1","                  2 "
"1","
"
"0","# keep scarce room as is"
"0","table(data$scarce_room)"
"1","
"
"1","  0 "
"1","  1 "
"1","
"
"1","164 "
"1","254 "
"1","
"
"0","# check conditional means"
"0","categoricals <- c(""scarce_room"", ""neighbourhood"", ""offer_cat"", ""accommodation_type"")"
"0",""
"0","for (i in 1:length(categoricals)) {"
"0","  data %>%"
"0","    group_by(get(categoricals[i])) %>%"
"0","    summarise(mean_price = mean(price) ,  n=n()) %>%"
"0","    print"
"0","}"
